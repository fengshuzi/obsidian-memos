# Obsidian é—ªå¿µç¬”è®°æ’ä»¶

åƒå‘å¾®åšä¸€æ ·è®°å½•çµæ„Ÿ - æ”¯æŒæ—¶é—´æˆ³ã€æ ‡ç­¾åˆ†ç±»å’Œå†å²æµè§ˆï¼Œç±»ä¼¼ Flomo çš„è½»é‡ç¬”è®°ä½“éªŒã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **å¿«é€Ÿæ•è·** - æŒ‰ä¸‹å¿«æ·é”®å³å¯å¿«é€Ÿè®°å½•çµæ„Ÿï¼Œæ— éœ€ä¸­æ–­å·¥ä½œæµ
- â° **è‡ªåŠ¨æ—¶é—´æˆ³** - æ¯æ¡é—ªå¿µè‡ªåŠ¨æ·»åŠ æ—¶é—´æˆ³ï¼Œæ ¼å¼ï¼š`- HH:mm å†…å®¹`
- ğŸ·ï¸ **æ ‡ç­¾åˆ†ç±»** - æ”¯æŒæ·»åŠ æ ‡ç­¾ï¼Œæ–¹ä¾¿åç»­ç­›é€‰å’Œæ•´ç†
- ğŸ“… **Journal å­˜å‚¨** - é—ªå¿µå­˜å‚¨åœ¨ journals æ–‡ä»¶å¤¹ï¼Œä¸ Logseq æ ¼å¼å…¼å®¹
- ğŸ“‹ **å¡ç‰‡å¼æµè§ˆ** - ç±»ä¼¼ Flomo çš„å¡ç‰‡åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰æ—¥æœŸåˆ†ç»„
- ğŸ” **æœç´¢ç­›é€‰** - æ”¯æŒå…³é”®è¯æœç´¢å’Œæ ‡ç­¾ç­›é€‰

## å®‰è£…

### æ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ `main.js`ã€`manifest.json` å’Œ `styles.css`
2. åœ¨ Obsidian vault çš„ `.obsidian/plugins/` ç›®å½•ä¸‹åˆ›å»º `obsidian-memos` æ–‡ä»¶å¤¹
3. å°†ä¸‹è½½çš„æ–‡ä»¶å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹
4. é‡å¯ Obsidian æˆ–é‡æ–°åŠ è½½æ’ä»¶
5. åœ¨è®¾ç½® â†’ ç¬¬ä¸‰æ–¹æ’ä»¶ä¸­å¯ç”¨ã€Œé—ªå¿µç¬”è®°ã€

## ä½¿ç”¨æ–¹æ³•

### å¿«æ·é”®

- `Cmd/Ctrl + Shift + M` - æ‰“å¼€é—ªå¿µè¾“å…¥å¼¹çª—
- åœ¨è¾“å…¥å¼¹çª—å†…ï¼š
  - `Cmd/Ctrl + Enter` - å‘é€é—ªå¿µ
  - `Cmd/Ctrl + Shift + Enter` - å‘é€å¹¶ç»§ç»­è¾“å…¥
  - `Escape` - å…³é—­å¼¹çª—

### å‘½ä»¤é¢æ¿

- `é—ªå¿µç¬”è®°: æ‰“å¼€é—ªå¿µè§†å›¾` - æ‰“å¼€ä¾§è¾¹æ è§†å›¾
- `é—ªå¿µç¬”è®°: æ–°å»ºé—ªå¿µ` - æ‰“å¼€è¾“å…¥å¼¹çª—
- `é—ªå¿µç¬”è®°: åˆ·æ–°é—ªå¿µåˆ—è¡¨` - åˆ·æ–°åˆ—è¡¨

### é—ªå¿µæ ¼å¼

é—ªå¿µä»¥åˆ—è¡¨é¡¹çš„å½¢å¼å­˜å‚¨åœ¨ journal æ–‡ä»¶ä¸­ï¼š

```markdown
- 14:30 è¿™æ˜¯ä¸€æ¡é—ªå¿µç¬”è®°
- 14:35 #æƒ³æ³• #çµæ„Ÿ è¿™æ˜¯å¸¦æ ‡ç­¾çš„é—ªå¿µ
- 15:00 æ”¯æŒ **Markdown** æ ¼å¼
```

## è®¾ç½®é€‰é¡¹

- **Journal æ–‡ä»¶å¤¹** - é—ªå¿µå­˜å‚¨çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œé»˜è®¤ `journals`
- **æ—¥æœŸæ ¼å¼** - Journal æ–‡ä»¶åçš„æ—¥æœŸæ ¼å¼ï¼Œé»˜è®¤ `YYYY-MM-DD`
- **æ—¶é—´æ ¼å¼** - æ—¶é—´æˆ³æ ¼å¼ï¼Œé»˜è®¤ `HH:mm`
- **é»˜è®¤æ ‡ç­¾** - æ–°å»ºé—ªå¿µæ—¶è‡ªåŠ¨æ·»åŠ çš„æ ‡ç­¾
- **æ¯é¡µæ˜¾ç¤ºæ•°é‡** - åˆ—è¡¨åˆ†é¡µæ˜¾ç¤ºçš„æ¡æ•°
- **æäº¤åä¿æŒå¼¹çª—æ‰“å¼€** - æ–¹ä¾¿è¿ç»­è®°å½•å¤šæ¡é—ªå¿µ

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# æ„å»ºå¹¶éƒ¨ç½²åˆ°æœ¬åœ° vault
npm run build-deploy

# å‘å¸ƒåˆ° GitHub
npm run release
```

## æ’ä»¶å¼€å‘å‚è€ƒï¼šç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨åˆ·æ–°è§†å›¾

å½“æ’ä»¶ä¾èµ– vault å†…æŸäº›æ–‡ä»¶ï¼ˆå¦‚æœ¬æ’ä»¶çš„ journals æ—¥è®°ï¼‰æ—¶ï¼Œè‹¥æ–‡ä»¶è¢«**å¤–éƒ¨å·¥å…·**ä¿®æ”¹ï¼ˆå¦‚ Alfredã€Python è„šæœ¬ã€Quick Add ç­‰ï¼‰ï¼ŒObsidian çš„ `vault.on('modify')` æœ‰æ—¶ä¸ä¼šè§¦å‘ï¼Œè§†å›¾ä¸ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚å¯é‡‡ç”¨ã€Œvault äº‹ä»¶ + metadataCache äº‹ä»¶ã€åŒç›‘å¬ï¼Œæ— éœ€å®šæ—¶è½®è¯¢ã€‚

### æ€è·¯

- **vault.on('modify' | 'create' | 'delete')**ï¼šObsidian è‡ªèº«æˆ–éƒ¨åˆ†å¤–éƒ¨å†™å…¥ä¼šè§¦å‘ï¼Œå…ˆç›‘å¬å¹¶åˆ·æ–°ã€‚
- **metadataCache.on('changed')**ï¼šå¤–éƒ¨ä¿®æ”¹æ–‡ä»¶åï¼ŒObsidian é‡æ–°è§£æè¯¥æ–‡ä»¶æ—¶ä¼šè§¦å‘ï¼Œç”¨äºå…œåº•å¤–éƒ¨å†™å…¥ï¼ˆå¦‚ Alfred/Python å†™ç›˜ï¼‰ã€‚

ä»…å½“å˜æ›´çš„æ˜¯ã€Œä½ å…³å¿ƒçš„è·¯å¾„ã€æ—¶å†å¤±æ•ˆç¼“å­˜å¹¶åˆ·æ–°è§†å›¾ï¼Œé¿å…æ— å…³æ–‡ä»¶å˜æ›´å¯¼è‡´å¤šä½™åˆ·æ–°ã€‚

### ç¤ºä¾‹ï¼ˆmain.ts / æ’ä»¶å…¥å£ï¼‰

```ts
// 1. å­˜å‚¨å±‚ï¼šæ–‡ä»¶å˜åŒ–æ—¶å¤±æ•ˆç¼“å­˜ï¼Œå¹¶å‘ŠçŸ¥ã€Œæ˜¯å¦ç”Ÿæ•ˆã€
// storage.ts
onFileChange(file: TFile): boolean {
    if (isMyTargetFile(file)) {  // ä»…å…³å¿ƒæŸè·¯å¾„/æ‰©å±•å
        this.invalidateCache();
        return true;
    }
    return false;
}

// 2. æ’ä»¶å±‚ï¼švault ä¸‰äº‹ä»¶ + metadataCache.changedï¼Œç”Ÿæ•ˆæ—¶åˆ·æ–°è§†å›¾
// main.ts
this.registerEvent(this.app.vault.on('modify', (file) => {
    if (file instanceof TFile && this.storage?.onFileChange(file)) {
        this.getActiveMyView()?.refresh();
    }
}));
this.registerEvent(this.app.vault.on('create', (file) => {
    if (file instanceof TFile && this.storage?.onFileChange(file)) {
        this.getActiveMyView()?.refresh();
    }
}));
this.registerEvent(this.app.vault.on('delete', (file) => {
    if (file instanceof TFile && this.storage?.onFileChange(file)) {
        this.getActiveMyView()?.refresh();
    }
}));
// å¤–éƒ¨ä¿®æ”¹ï¼ˆå¦‚ Alfred/Python å†™æ–‡ä»¶ï¼‰æ—¶ï¼Œvault.modify å¯èƒ½ä¸è§¦å‘ï¼›
// metadataCache åœ¨é‡æ–°è§£ææ–‡ä»¶åä¼šè§¦å‘ changed
this.registerEvent(this.app.metadataCache.on('changed', (file) => {
    if (file instanceof TFile && this.storage?.onFileChange(file)) {
        this.getActiveMyView()?.refresh();
    }
}));
```

å…¶ä»–æ’ä»¶åªéœ€ï¼šå®ç°è‡ªå·±çš„ `isMyTargetFile` ä¸ `invalidateCache`ï¼Œå¹¶åœ¨ `onFileChange` é‡Œè¿”å›æ˜¯å¦ç”Ÿæ•ˆï¼›åœ¨ main é‡Œç”¨ä¸Šè¿°å››æ®µ `registerEvent` å³å¯å¤ç”¨è¯¥æ–¹æ¡ˆã€‚

## è®¾è®¡çµæ„Ÿ

- [Logseq](https://logseq.com/) - é—ªå¿µåŠŸèƒ½å’Œ Journal æ ¼å¼
- [Flomo](https://flomoapp.com/) - å¡ç‰‡å¼ UI å’Œè½»é‡è®°å½•ä½“éªŒ
- [Obsidian Thino](https://github.com/Quorafind/Obsidian-Thino) - æ’ä»¶äº¤äº’å‚è€ƒ

## è®¸å¯è¯

MIT License
